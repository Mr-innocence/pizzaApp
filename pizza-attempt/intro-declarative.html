<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width = device-width", initial-scale=1.0>
      <title>Pizza Order</title>
      <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
      <style>
        body
        {
          font: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        }
        .pizza-creator-app
        {
          display: grid;
          grid-template-rows:auto auto auto;

        }
        .userDetails__container
        {
          display: grid;
          grid-template-columns: repeat(3,1fr);
          grid-gap: 1rem 2rem;
        }
        .detail 
        {
          display: grid;
          grid-template-rows: 1fr auto;
          grid-row-gap: 0.5rem;
        }
        .detail > label
        {
          text-transform: uppercase;
          font-size: small;
          font-weight: bold;
          color: #6E7790;
        }
        .detail > input
        {
          border-radius: 2px;
          border: 1px solid #d7d7e7;
          font-size: 1.2rem;
          color: rgba(0, 0, 0, 0.8);
          padding: 0.5rem 1rem;
        }
        .detail > input:hover,
        .detail > input:focus 
        {
          border-color: #1a98e1;
        }
        .detail > input:focus 
        {
          box-shadow: 0 0 0 2px #1a98e133;
        }
        .sizes__container
        {
          display: grid;
          grid-template-columns: repeat(3,1fr);
          grid-gap: 2rem; 
          align-items: center;
        }
        .size > img 
        {
          --width: 100px;
          border: 5px solid transparent;
          border-radius: 50%;
        }
        .size:hover > img 
        {
          border-color: rgba(0, 0, 0, 0.2);
        }
        .size:hover {
          color: #1a98e1;
        }
        .size--small > img 
        {
          width: calc(var(--width) * 0.8);
        }
        .size--medium > img 
        {
          width: calc(var(--width) * 1);
        }
        .size--large > img 
        {
          width: calc(var(--width) * 1.2);
        }
        .size__price
        {
          margin-top: 0.5rem;
          color: rgba(0, 0, 0, 0.8);
          font-size: small;      
        }
        .size--active > img {
          border-color: rgba(0, 0, 0, 0.2)!important;
        }
        .toppings__container
        {
          display: grid;
          grid-template-columns: repeat(4,1fr);
          grid-gap: 1rem 2rem;
        }

        .topping {
          border-radius: 2px;
          display: grid;
          grid-template-columns: auto 1fr;
          align-items: center;
          grid-gap: 1rem;
          background: #f2f2f2;
          cursor: pointer;
          border: 1px solid transparent;
        }

        .topping:hover {
          border-color: #1a98e1;
          color: #1a98e1;
        }

        .topping--active {
          background: #1a98e1;
          color: white!important;
        }

        .topping > img {
          width: 50px;
          height: 100%;
          padding: 10px;
          box-sizing: border-box;
          background: #e6e6e6;
        }

        .topping > span {
          padding: 0.75rem 0;
        }

        .summary ul
        {
          padding: 0;
          
        }
        .item
        {
          display: grid;
          grid-template-columns: 1fr auto;
        }

        button[type="submit"] {
          width: 100%;
          background: #98C550;
          border: none;
          padding: 10px 15px;
          text-align: center;
          font-size: 1.2rem;
          color: white;
          border-radius: 5px;
          cursor: pointer;
        }

        button[type="submit"]:hover {
          background: #98C550E6;;
        }

      </style>
    </head>

    <body>
      <section class="pizza-creator-app">
          <div class="section details">
              <h2>Enter your details</h2>
              <form>
                <div class="userDetails__container">
                  <div class="detail">
                      <label for="name">name</label>
                      <input type="text" id="name">
                  </div>
      
                  <div class="detail">
                      <label for="email">email</label>
                      <input type="text" id="email">
                  </div>
      
                  <div class="detail">
                      <label for="confirm_email">confirm email</label>
                      <input type="text" id="confirm_email">
                  </div>
    
                  <div class="detail">
                      <label for="address">address</label>
                      <input type="text" id="address">
                  </div>
      
                  <div class="detail">
                      <label for="postcode">postcode</label>
                      <input type="text" id="postcode">
                  </div>
      
                  <div class="detail">
                      <label for="contactNumber">contact Number</label>
                      <input type="text" id="contactNumber">
                  </div>
                </div>   
              </form>
    
              
    
          </div>
          <div class = "section sizes">           
            <h2>Select Your size</h2>
            <div class="sizes__container">
              <div class="size size--small size--active">
                  <img src = "assets/size.png" alt="small">
                  <div>
                      Small
                    <br />
                    <span class="size__price">$9.99</span>
                  </div>                      
              </div>

              <div class="size size--medium">
                    <img src = "assets/size.png" alt="medium">
                  <div>
                      Medium
                    <br />
                    <span class="size__price">$10.99</span>
                  </div>                 
              </div>

              <div class="size size--large">
                    <img src = "assets/size.png" alt="large"> 
                  <div>
                      Large
                    <br />
                    <span class="size__price">$11.99</span>
                  </div>  
              </div>      
            </div>    
          </div>
          <div class = "section toppings">             
            <h3>Pick your toppings</h3>
            <div class="toppings__container">
            </div>
          </div>
          <div class="section summary">
            <h2>Summery</h2>
            <div class = "summary__list"></div>
            <hr>
            <p class="summary__total">
              <span>Total:</span>
              <span>$ 12.96</span>
            </p>
            <p>
              <button type="submit">
                Place order
              </button>
            </p>
          </div>
      </section>  

    </div>
      
    <script>
    let toppingsState = [
    {
        name: 'Anchovy',
        imgSrc: './assets/toppings/anchovy.svg',
        price: 0.99,
    },
    {
        name: 'Bacon',
        imgSrc: './assets/toppings/bacon.svg',
        price: 0.99,
    },
    {
        name: 'Basil',
        imgSrc: './assets/toppings/basil.svg',
        price: 0.99,
    },
    {
        name: 'Chili',
        imgSrc: './assets/toppings/chili.svg',
        price: 0.99,
    },
    {
        name: 'Mozzarella',
        imgSrc: './assets/toppings/mozzarella.svg',
        price: 0.99,
    },
    {
        name: 'Mushroom',
        imgSrc: './assets/toppings/mushroom.svg',
        price: 0.99,
    },
    {
        name: 'Olive',
        imgSrc: './assets/toppings/olive.svg',
        price: 0.99,
    },
    {
        name: 'Onion',
        imgSrc: './assets/toppings/onion.svg',
        price: 0.99,
    },
    {
        name: 'Pepper',
        imgSrc: './assets/toppings/pepper.svg',
        price: 0.99,
    },
    {
        name: 'Pepperoni',
        imgSrc: './assets/toppings/pepperoni.svg',
        price: 0.99,
    },
    {
        name: 'Peppers',
        imgSrc: './assets/toppings/peppers.svg',
        price: 0.99,
    },
    {
        name: 'Sweetcorn',
        imgSrc: './assets/toppings/sweetcorn.svg',
        price: 0.99,
    },
    ];

    let chosenToppingNameState = [];
    const toppingsContainer = document.querySelector('.toppings__container');
    const toppingDivs = renderToppings(toppingsState, chosenToppingNameState);
    toppingsContainer.append(...toppingDivs);

    const summaryListDiv = document.querySelector('.summary__list');
    const summaryList = renderSummaryList(chosenToppingNameState, toppingsState);
    summaryListDiv.append(summaryList);
    


    


    function setChosenToppingNamesState(value) {
        chosenToppingNameState = value;
        const toppingsContainer = document.querySelector('.toppings__container');
        toppingsContainer.innerHTML = null;
        const toppingDivs = renderToppings(toppingsState, chosenToppingNameState);
        toppingsContainer.append(...toppingDivs);

        const summaryListDiv = document.querySelector('.summary__list');
        summaryListDiv.innerHTML = null;
        const summaryList = renderSummaryList(chosenToppingNameState, toppingsState);
        summaryListDiv.append(summaryList);
    }

    function renderSummaryList(chosenToppingNames, toppings){
        function getToppingListItemFromToppingName(name){
            function getToppingByName({ name: thisName}){
                return thisName === name;
            }

            const topping = toppings.find(getToppingByName);
            const nameSpan = document.createElement('span');
            nameSpan.innerText = topping.name;
            nameSpan.classList.add('item__name');

            const priceSpan = document.createElement('span');
            priceSpan.innerText = topping.price;
            priceSpan.classList.add('item__price');

            const toppingListItem = document.createElement('li');
            toppingListItem.classList.add('item');
            toppingListItem.append(nameSpan,priceSpan);
            return toppingListItem;
        }
        const chosenToppingListItems = chosenToppingNames.map(getToppingListItemFromToppingName);

        const summaryList = document.createElement('ul');
        summaryList.classList.add('itmes');
        summaryList.append(...chosenToppingListItems);
        return summaryList;
         
    }



    function renderToppingDiv({ name, imgSrc}, chosenToppingNames){
        let isChosen = chosenToppingNames.includes(name);
        function onToppingDivClick()
        {
            let newChosenToppingState = chosenToppingNames;
            if(!isChosen)
            {
                newChosenToppingState = [...chosenToppingNames, name];
            }else{
                newChosenToppingState = chosenToppingNames.filter(chosenToppingName => chosenToppingName !== name);
            }
            setChosenToppingNamesState(newChosenToppingState);
        }

        const toppingImg = document.createElement('img');
        toppingImg.src = imgSrc;
        toppingImg.alt = name;
        const toppingDescript = document.createElement('span');
        toppingDescript.innerText = name
        const toppingDiv = document.createElement('div');
        toppingDiv.classList.add("topping");

        toppingDiv.onclick = onToppingDivClick;

        if(isChosen){
            toppingDiv.classList.add('topping--active');
        }

        toppingDiv.append(toppingImg, toppingDescript);
        return toppingDiv;
    }
    

    function renderToppings(toppings,chosenToppingNames){
        function getToppingDivFromTopping(topping){
            return renderToppingDiv(topping, chosenToppingNames);         
        }
            return toppings.map(getToppingDivFromTopping)
    }

    </script>
  </body>

</html>